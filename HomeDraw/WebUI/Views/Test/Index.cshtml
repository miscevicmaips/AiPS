
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
    <script src="~/Scripts/jquery-3.3.1.js"></script>
    <script src="~/Scripts/jquery.signalR-2.2.2.min.js"></script>
    <script src="~/signalr/hubs"></script>
    <script src="~/Scripts/jquery-ui.js"></script>

    <script src="~/Scripts/two.js"></script>
    <link href="~/Content/bootstrap.css" rel="stylesheet" />


</head>
<body style="margin:0px;">
    <div class="container-fluid p-0">
        <div style="position:absolute; height:100%; width:100%; background-color:black;">
            <div class="row">
                <div class="col-md-12 text-center">
                    <button id="drawCircleButton" class="btn btn-info mt-1 mb-1">Draw Circle</button>
                    <button id="drawRectangleButton" class="btn btn-info mt-1 mb-1">Draw Rectangle</button>
                </div>
            </div>

            <div class="row">
                <div id="drawingArea" class="col-md-12" style="height: 700px; width:100%; background-color:white;">
                    @ViewBag.Message
                </div>
            </div>
        </div>
    </div>


    <script>
        $(function () {

            var draw = $.connection.signalRHub;

            draw.client.drawCircleCallback = function () {

                var circleElem = $('<div></div>', {
                    style: 'width: ' + 100 + 'px; height: ' + 100 + 'px; background-color:black;',
                    id: 'draggableCircle'
                });

                $('#drawingArea').append(circleElem.draggable({
                    drag: function () {
                        var position = circleElem.offset();
                        draw.server.moveCircleElement(position.left, position.top);
                        console.log("LEFT: " + position.left)
                        console.log("RIGHT: " + position.top);
                        console.log("==========");
                    }
                }));

                var elem = document.getElementById('draggableCircle');
                var params = { width: 100, height: 100 };
                var two = new Two(params).appendTo(elem);

                var circle = two.makeCircle(72, 100, 50);
                circle.fill = '#FF8000';
                circle.stroke = 'orangered';
                circle.linewidth = 5;

                two.update();
            };

            draw.client.drawRectangleCallback = function () {

                var rectangleElem = $('<div></div>', {
                    style: 'width: ' + 100 + 'px; height: ' + 100 + 'px; background-color:black;',
                    id: 'draggableRectangle'
                });

                $('#drawingArea').append(rectangleElem.draggable({
                    drag: function () {
                        var position = rectangleElem.offset();
                        draw.server.moveRectangleElement(position.left, position.top);
                    }
                }));

                var elem = document.getElementById('draggableRectangle');
                var params = { width: 100, height: 100 };
                var two = new Two(params).appendTo(elem);

                var rectangle = two.makeRectangle(0, 0, 100, 100);
                rectangle.fill = '#FF8000';

                two.update();
            };

            $.connection.hub.start().done(function () {
                $('#drawCircleButton').click(function () {
                    draw.server.drawCircle();
                });
            });

            $.connection.hub.start().done(function () {
                $('#drawRectangleButton').click(function () {
                    draw.server.drawRectangle();
                });
            });


        });
    </script>

    <script>
        // JavaScript - MoveElement
        var draw = $.connection.signalRHub;
        draw.client.moveCircleElementCallback = function (x, y) {
            //var draggableShape = $('#drawingArea').find('#draggableCircle');
            $('#draggableCircle').css({ left: x, top: y });
        };
    </script>


    <script>
        // JavaScript - MoveElement
        var draw = $.connection.signalRHub;
        draw.client.moveRectangleElementCallback = function (x, y) {
            //var draggableShape = $('#drawingArea').find('#draggableCircle');
            $('#draggableRectangle').css({ left: x, top: y });
        };
    </script>








































</body>
</html>
